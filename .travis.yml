language: cpp

dist: trusty
sudo: required

addons:
  apt:
    sources:
    - george-edison55-precise-cmake-3.x
    packages:
    - cmake
    - git
    - make

after_success:
  - $CC --version
  - git clone https://bitbucket.org/intelcilkruntime/intel-cilk-runtime.git && cd intel-cilk-runtime
  - libtoolize
  - aclocal
  - automake --add-missing
  - autoconf
  - ./configure
  - make -j
  - sudo make install -j
  - cd ..
  - rm -rf intel-cilk-runtime

compiler:
  - clang
  - gcc

script:
  - cd tools && git clone https://github.com/wsmoses/Cilk-Clang clang && cd ..
  - mkdir build
  - cd build
  - cmake ..
  - make -j
  - sudo make -j install
  - cd ..
  - export CC="clang"
  - export CXX="clang++"
